<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Payara Documentation :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Micro%20Documentation/Logging%20and%20Monitoring/Request%20Tracing/request-tracing.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="paragraph">
<p>[[Request Tracing Service-in-payara-micro]]
= Request Tracing in Payara Micro</p>
</div>
<div class="paragraph">
<p><em>Since Payara Micro 4.1.1.164</em></p>
</div>
<div class="paragraph">
<p>The Request Tracing service works the same on Payara Micro Community and will trace the
same events described in its <a href="../../../Payara%20Server%20Documentation/Logging%20and%20Monitoring/Request%20Tracing%20Service/Request%20Tracing%20Service.html" class="page">documentation</a>.</p>
</div>
<div class="sect1">
<h2 id="usage"><a class="anchor" href="#usage"></a>Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Payara Micro Community exposes a number of command line options to configure request tracing. These options cover the most frequent
use cases for Payara Micro Community, but you can also configure the Request Tracing Service using a <strong>post</strong>-boot command file,
giving you access to the asadmin commands and the full range of options they provide.</p>
</div>
<div class="sect2">
<h3 id="configuration-options"><a class="anchor" href="#configuration-options"></a>Configuration Options</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enableRequestTracing</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables the service when present.</p>
</div>
<div class="paragraph">
<p>A supplementary parameter can be provided with this option to encapsulate the value
and unit options, for example, the following will enable the service with a threshold
of 4ms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -jar payara-micro.jar --enableRequestTracing 4ms</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestTracingThresholdUnit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accepts a String value determining the time unit, defaulting to seconds if no
value is given. The accepted strings are (case insensitive):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NANOSECONDS</code></p>
</li>
<li>
<p><code>MICROSECONDS</code></p>
</li>
<li>
<p><code>MILLISECONDS</code></p>
</li>
<li>
<p><code>SECONDS</code></p>
</li>
<li>
<p><code>MINUTES</code></p>
</li>
<li>
<p><code>HOURS</code></p>
</li>
<li>
<p><code>DAYS</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is combined with the <code>requestTracingThresholdValue</code> setting to determine the threshold time period.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestTracingThresholdValue</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accepts an integer value to determine the threshold value before a request is traced,
defaulting to 30 if no value is entered. This is combined with the <code>requestTracingThresholdUnit</code> setting to determine
the threshold time period.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enablerequesttracingadaptivesampling</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables the <em>Adaptive Sampling</em> option when present. When enabled, this allows the sample rate to change to attempt to
meet a target count of traces over a specified period of time.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requesttracingadaptivesamplingtargetcount</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accepts an integer value to determine the threshold value before a request is traced,
defaulting to 6 if no value is entered. Only used if adaptive sampling is enabled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requesttracingadaptivesamplingtimevalue</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accepts an integer value to determine the threshold value before a request is traced,
defaulting to 1 if no value is entered. Only used if adaptive sampling is enabled.
This is combined with the <code>requesttracingadaptivesamplingtimeunit</code> setting to determine
the adaptive sampling time period.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requesttracingadaptivesamplingtimeunit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accepts a String value determining the time unit, defaulting to minutes if no
value is given. The accepted strings are (case insensitive):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NANOSECONDS</code></p>
</li>
<li>
<p><code>MICROSECONDS</code></p>
</li>
<li>
<p><code>MILLISECONDS</code></p>
</li>
<li>
<p><code>SECONDS</code></p>
</li>
<li>
<p><code>MINUTES</code></p>
</li>
<li>
<p><code>HOURS</code></p>
</li>
<li>
<p><code>DAYS</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is combined with the <code>requesttracingadaptivesamplingtimevalue</code> setting to determine
the adaptive sampling time period.
Only used if adaptive sampling is enabled.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="shorthand-notation"><a class="anchor" href="#shorthand-notation"></a>Shorthand Notation</h3>
<div class="paragraph">
<p>To enable and configure request tracing with a single command, the
<code>--enableRequestTracing</code> option allows you to provide <strong>one</strong> string following it
to set the threshold unit and/or value.</p>
</div>
<div class="paragraph">
<p>In other words, the value and unit need to be a single string with no spaces,
so <code>500ms</code> would be allowed, but <code>500 ms</code> would not. In the second case,
the unit is ignored and the default <code>SECONDS</code> is kept.</p>
</div>
<div class="paragraph">
<p>Notation for units is as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Unit</th>
<th class="tableblock halign-left valign-top">Acceptable notation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NANOSECONDS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Nanoseconds</code> (case-insensitive)</p>
</li>
<li>
<p><code>Nanosecond</code> (case-insensitive)</p>
</li>
<li>
<p><code>ns</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MICROSECONDS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Microseconds</code> (case-insensitive)</p>
</li>
<li>
<p><code>Microsecond</code> (case-insensitive)</p>
</li>
<li>
<p><code>us</code></p>
</li>
<li>
<p><code>Î¼s</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MILLISECONDS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Milliseconds</code> (case-insensitive)</p>
</li>
<li>
<p><code>Millisecond</code> (case-insensitive)</p>
</li>
<li>
<p><code>ms</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SECONDS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Seconds</code> (case-insensitive)</p>
</li>
<li>
<p><code>Second</code> (case-insensitive)</p>
</li>
<li>
<p><code>s</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MINUTES</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Minutes</code> (case-insensitive)</p>
</li>
<li>
<p><code>Minute</code> (case-insensitive)</p>
</li>
<li>
<p><code>Mins</code> (case-insensitive)</p>
</li>
<li>
<p><code>Min</code> (case-insensitive)</p>
</li>
<li>
<p><code>m</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HOURS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Hours</code> (case-insensitive)</p>
</li>
<li>
<p><code>Hour</code> (case-insensitive)</p>
</li>
<li>
<p><code>h</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DAYS</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><code>Days</code> (case-insensitive)</p>
</li>
<li>
<p><code>Day</code> (case-insensitive)</p>
</li>
<li>
<p><code>d</code></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_usages"><a class="anchor" href="#_example_usages"></a>Example usages</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><code><strong>java -jar payara-micro.jar --enableRequestTracing</strong></code></dt>
<dd>
<p>Enable request tracing</p>
</dd>
<dt class="hdlist1"><code><strong>java -jar payara-micro.jar --enableRequestTracing ns</strong></code></dt>
<dd>
<p>Enable request tracing and set threshold unit to nanoseconds (<code><em>value</em></code>
<em>defaults to</em> <code><em>30</em></code>)</p>
</dd>
<dt class="hdlist1"><code><strong>java -jar payara-micro.jar --enableRequestTracing 2</strong></code></dt>
<dd>
<p>Enable request tracing and set threshold value to 2 (<code><em>unit</em></code> <em>defaults to</em>
  <code><em>SECONDS</em></code>)</p>
</dd>
<dt class="hdlist1"><code><strong>java -jar payara-micro.jar --enableRequestTracing 4ms</strong></code></dt>
<dd>
<p>Enable request tracing and set threshold to 4 microseconds</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Exercise caution when using the shorthand notation together with other parameters. Due to the way the parser works, the last parameter entered will override the previous. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -jar payara-micro.jar --requestTracingThresholdUnit DAYS --enableRequestTracing 1ns</code></pre>
</div>
</div>
<div class="paragraph">
<p>Will enable request tracing, and set the threshold to <code>1 NANOSECOND</code>, while</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -jar payara-micro.jar --enableRequestTracing 1ns --requestTracingThresholdUnit DAYS</code></pre>
</div>
</div>
<div class="paragraph">
<p>Will enable request tracing, and set the threshold to <code>1 Day</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
